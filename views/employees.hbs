{{!-- Joshua Griep, Sam Bleyl, CS340 --}}

<h1>Employees</h1>

{{!-- READ table --}}
<table>
  <thead>
    <tr>
      {{#each employees.[0]}}
        <th>{{@key}}</th>
      {{/each}}
      <th></th>
    </tr>
  </thead>
  <tbody>
    {{#each employees}}
      <tr data-value="{{this.id}}" data-locationid="{{this.locationID}}">
        <td>{{this.id}}</td>
        <td>{{this.first}}</td>
        <td>{{this.last}}</td>
        <td>{{this.role}}</td>
        <td>{{this.active}}</td>
        <td>{{this.phone}}</td>
        <td>{{this.branch}}</td>
        <td>
          <button class="delete-employee" data-id="{{this.id}}">Delete</button>
        </td>
      </tr>
    {{/each}}
  </tbody>
</table>

{{!-- CREATE form --}}
<h2>New Employee</h2>
<form id="create_employee_form">
  <label>First:</label>
  <input id="create_employee_fname" required>

  <label>Last:</label>
  <input id="create_employee_lname" required>

  <label>Role:</label>
  <select id="create_employee_role" required>
    <option value="" disabled selected>Select…</option>
    <option>Sales</option>
    <option>Stocking</option>
    <option>Designer</option>
    <option>Manager</option>
  </select>

  <label>Active:</label>
  <input id="create_employee_active" type="number" min="0" value="0" required>

  <label>Phone:</label>
  <input id="create_employee_phone" pattern="[0-9]{10}" required>

  <label>Branch:</label>
  <select id="create_employee_site" required>
    <option value="" disabled selected>Select…</option>
    {{#each locations}}
      <option value="{{this.id}}">{{this.branch}}</option>
    {{/each}}
  </select>

  <button type="submit">Add</button>
</form>

{{!-- UPDATE form --}}
<h2>Update Employee</h2>
<form id="update_employee_form">
  <label>Who?</label>
  <select id="update_employee_id" required>
    <option value="" disabled selected>Select…</option>
    {{#each employees}}
      <option value="{{this.id}}">#{{this.id}} — {{this.first}} {{this.last}}</option>
    {{/each}}
  </select>

  <label>Role:</label>
  <select id="update_employee_role" required>
    <option value="" disabled selected>Select…</option>
    <option>Sales</option>
    <option>Stocking</option>
    <option>Designer</option>
    <option>Manager</option>
  </select>

  <label>Active:</label>
  <input id="update_employee_active" type="number" min="0" required>

  <label>Phone:</label>
  <input id="update_employee_phone" pattern="[0-9]{10}" required>

  <label>Branch:</label>
  <select id="update_employee_site" required>
    <option value="" disabled selected>Select…</option>
    {{#each locations}}
      <option value="{{this.id}}">{{this.branch}}</option>
    {{/each}}
  </select>

  <button type="submit">Update</button>
</form>

<script src="/js/add_employee.js"></script>
<script src="/js/update_employee.js"></script>
<script src="/js/delete_employee.js"></script>
