{{!-- views/orderdetails.hbs — Joshua Griep, Sean Bleyl, CS340 --}}

<h1>Product Details</h1>

{{!-- READ table --}}
<table>
  <thead>
    <tr>
      {{#each orderdetails.[0]}}
      <th>{{@key}}</th>
      {{/each}}
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {{#each orderdetails}}
    <tr data-value="{{this.id}}">
      <td>{{this.id}}</td>
      <td>{{this.customerFirst}}</td>
      <td>{{this.customerLast}}</td>
      <td>{{this.estimate}}</td>
      <td>{{this.status}}</td>
      <td>{{this.total}}</td>
      <td>{{this.product}}</td>
      <td>{{this.quantity}}</td>
      <td>{{this.unitPrice}}</td>
      <td>{{this.lineTotal}}</td>
      <td>
        <button class="delete-orderdetail" data-id="{{this.id}}">
          Delete
        </button>
      </td>
    </tr>
    {{/each}}
  </tbody>
</table>

{{!-- CREATE form --}}
<h2><a href="/purchase">Place a New Order</a></h2>

{{!-- UPDATE form --}}
<h2>Update Order Detail</h2>
<form id="update_orderdetail_form">
  <label>Line Item:</label>
  <select name="itemId" required>
    <option disabled selected>Select line…</option>
    {{#each orderdetails}}
    <option value="{{this.id}}">
      {{this.id}} — {{this.product}} (Qty:{{this.quantity}})
    </option>
    {{/each}}
  </select>

  <label>New Quantity:</label>
  <input name="quantity" type="number" min="1" required>

  <label>New Unit Price:</label>
  <input name="unitPrice" type="number" min="0.01" step="0.01" required>

  <button type="submit">Update</button>
</form>

<script src = "/js/update_orderdetail.js"></script>
<script src = "/js/delete_orderdetail.js"></script>